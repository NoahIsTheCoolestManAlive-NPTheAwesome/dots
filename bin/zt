#!/bin/bash

# favorites list must have one path per line
fav="$HOME/.config/zathura/current_favorites"

if [ -z $1 ]; then
    # open tabbed zathura with favorites
    favlist=$(cat $fav | sed -e '/^#/ d' -e ':a' -e 'N' -e '$!ba' -e 's/\n/ /g')
    #tabbed -cd zathura $favlist -e
    txid=$(tabbed -cd) && echo $txid && zathura --fork $favlist -e $txid
else
    while getopts "a:dm" o; do
        case "${o}" in
            a) # add -a file to favorites
                a=${OPTARG}
                echo "$(pwd)/$a" >> $fav
                ;;
            d) # delete all favorites
                rm -i $fav
                ;;
            m) # manage favorites
                $EDITOR $fav
                ;;
            *)
                exit 1
                ;;
        esac
    done
fi
